(function(b){b.bgSlideshow=function(v){function Ea(a){e&&clearTimeout(e);I&&clearTimeout(I);V&&(g&&g.unbind("load",W),h&&h.unbind("load",W),ea(),V=!1);la(a.value);ma?(fa(),ma=!1):(y(),I=setTimeout(fa,750))}function Fa(a){e&&clearTimeout(e);I&&clearTimeout(I);y();la(a.value);fa()}function la(a){a=a.split("//").join("/");"/"!==a?(a=a.split("/"),3===a.length?(d=parseInt(a[2],10)-1,l=a[1]):isNaN(a[1])?(d=0,l=a[1]):(d=parseInt(a[1],10)-1,l="")):(l="/",d=0)}function fa(){var a;f=0;if("/"!==l)for(a=m;a--;)if(ga[a]== l){f=a;break}for(a=m;a--;)a!==f?(z[a].css("display","none"),n[a].css({opacity:Ga,cursor:"pointer"})):(n[f].css({opacity:1,cursor:"default"}),na?na=!1:J&&z[f].fadeIn(500));K&&K.fadeIn(300);if(oa!==f){J=!0;k=pa[f];q=k.length;A=q-1;B=[];p=[];L=[];d>A&&(d=0);for(var c=0;c<q;c++)""!==k[c].html()?(k[c].data("id",c),p[c]=k[c],r=!0):(k[c].css("display","none"),J=r=!1),k[c].attr("title")?(k[c].data("url",k[c].attr("title")),L[c]=k[c].attr("title"),k[c].removeAttr("title")):L[c]=k[c].data("url");1<q?(J?z[f].css("display", "block"):z[f].css("display","none"),ha&&(M&&b("#play-pause").css("display","block"),N&&b(".prev-next").css("display","block"),ha=!1)):(z[f].css("display","none"),M&&b("#play-pause").css("display","none"),N&&b(".prev-next").css("display","none"),ha=!0);if(Ha){a=[];for(c=0;c<q;c++)a[c]=L[c];for(;0<a.length;)c=Math.floor(Math.random()*a.length),B[B.length]=a[c],a.splice(c,1)}else B=L;X=n[f].data("stretch");qa=n[f].data("center")}if(J)for(a=q;a--;)a!==d?k[a].css({cursor:"pointer",opacity:1}):k[a].css({cursor:"default", opacity:Y});Ia?ra(B[d]+"?img="+(new Date).getTime().toString()):ra(B[d]);oa=f}function y(){O=!0;C=!1;for(var a=m;a--;)n[a].unbind("click",sa);if(r)for(a=q;a--;)p[a].unbind("click",ta);N&&(ia.unbind("click",ua),ja.unbind("click",va))}function ra(a){V=!0;0===w?(wa.prepend(D),D.css("z-index",parseInt(E.css("z-index"),10)+1),g=b("<img />").css({display:"none",position:"fixed"}).one("load",W),g.appendTo(D),g.attr("src",a)):(wa.prepend(E),E.css("z-index",parseInt(D.css("z-index"),10)+1),h=b("<img />").css({display:"none", position:"fixed"}).one("load",W),h.appendTo(E),h.attr("src",a))}function W(){V=!1;0===w?(P=g.width(),Q=g.height(),w=1):(P=h.width(),Q=h.height(),w=0);K&&K.fadeOut(300);xa();Z=!0;X||ea();1===w?g.fadeIn(ya,za):h.fadeIn(ya,za)}function ea(){1===w?h&&(h.remove(),E.detach()):g&&(g.remove(),D.detach())}function za(){Z=!1;X&&ea();e&&clearTimeout(e);for(var a=m;a--;)a!==f&&n[a].click(sa);if(1<q){if(r)for(a=q;a--;)a!==d&&p[a].click(ta);N&&(ia.click(ua),ja.click(va));ka?F?e=setTimeout(Aa,Ja):C=!0:C=!0}else C= !0;O=!1}function Aa(){y();r?(p[d].css({cursor:"pointer",opacity:1}),d<A?d++:d=0,p[d].css({cursor:"default",opacity:Y})):d<A?d++:d=0;b.address.value(l.split("/").join("")+"/"+(d+1).toString())}function sa(){O||b.address.value(ga[b(this).data("id")])}function ta(){O||(e&&clearTimeout(e),y(),b.address.value(l.split("/").join("")+"/"+(parseInt(b(this).data("id"),10)+1).toString()))}function ua(){e&&clearTimeout(e);y();r&&p[d].css({cursor:"pointer",opacity:1});0<d?d--:d=A;r&&p[d].css({cursor:"default", opacity:Y});b.address.value(l.split("/").join("")+"/"+(d+1).toString())}function va(){e&&clearTimeout(e);y();r&&p[d].css({cursor:"pointer",opacity:1});d<A?d++:d=0;r&&p[d].css({cursor:"default",opacity:Y});b.address.value(l.split("/").join("")+"/"+(d+1).toString())}function Ba(){F?(e&&clearTimeout(e),R.css("display","none"),S.css("display","block"),F=!1,O||(C=!0)):(S.css("display","none"),R.css("display","block"),F=!0,C&&Aa())}function xa(a){s=T.width();u=T.height();if("undefined"!==typeof g){"object"=== typeof a&&Z&&(Z=!1,g.stop(!0,!0),h&&h.stop(!0,!0));a=s/P;var c=u/Q,b,d;X&&800<s?(c=s>u?a:c,a=Math.ceil(P*c),c=Math.ceil(Q*c),qa?(a>s?b=a-s>>1:b=0,c>u?d=c-u>>1:d=0):d=b=0):(c=a>c?c:a,a=Math.ceil(P*c),c=Math.ceil(Q*c),s>a?b=-(s-a>>1):b=0,u>c?d=-(u-c>>1):d=0);1===w?g&&g.width(a).height(c).css({top:-d,left:-b}):h&&h.width(a).height(c).css({top:-d,left:-b})}}var t=b(document);if(0!==t.find("#bg-images").length){var ka=v.autoPlay,Ja=v.transitionDelay,Y=v.activeNumOpacity,Ga=v.nonActiveCatOpacity,Ha=v.randomizeImages, S,R,ia,ja,F,A,q,e,I,P,Q,s,u,g,h,B,l,K,p,k,L,qa,X,N,r,M,J,oa,d,w=0,m=0,f=0,ya=750,O=!1,C=!1,V=!1,ha=!1,Z=!1,na=!0,ma=!0,T=b(window),wa=b("body"),Ca=b("#bg-images"),D=b("<div />"),E=b("<div />"),$=Ca.find("ul"),pa=[],n=[],ga=[],z=[],Ia=-1===navigator.userAgent.toLowerCase().indexOf("chrome")?!1:!0;v.disableRightClick&&t.bind("contextmenu",function(a){a.preventDefault()});0<t.find("#preloader").length&&(K=b("#preloader"));ka?F=!0:F=!1;if(0<$.length){var U,aa,ba,Da=b("#categories"),ca,G,H,da,x;$.each(function(){aa= [];ba=0;x=b(this);x.children("li").each(function(){aa[ba]=b(this);ba++});x.attr("class")?(ca=x.attr("class"),"stretch"===ca?(G=!0,H=!1):H="stretch-center"===ca?G=!0:G=!1):(G=!0,H=!1);da=x.attr("title");x.removeAttr("title");ga[m]=da.toLowerCase().split(" ").join("_");U=b("<p />");U.html(da).data({id:m,stretch:G,center:H});Da.append(U);z[m]=x;n[m]=U;pa[m]=aa;m++});1===$.length&&n[0].css("visibility","hidden");$=v=da=H=G=ca=ba=Da=U=aa=null;0!==t.find("#music").length&&0!==t.find(".volume").length|| n[0].css("margin-left",parseInt(n[0].css("margin-left"),10)<<1);0<t.find(".play-button").length&&0<t.find(".pause-button").length?(S=b(".play-button"),R=b(".pause-button"),S.click(Ba),R.click(Ba),ka?S.css("display","none"):R.css("display","none"),M=!0):M=!1;0<t.find(".prev-button").length&&0<t.find(".next-button").length?(ia=b(".prev-button"),ja=b(".next-button"),N=!0):M=!1;Ca.css("display","block");D.css({position:"fixed",zIndex:-1E4});E.css({position:"fixed",zIndex:-1E4});s=T.width();u=T.height(); b.address.internalChange(Fa);b.address.externalChange(Ea);T.resize(xa);b.bgSlideshow.getIsOn=function(){return d};b.bgSlideshow.getCatOn=function(){return f};b.bgSlideshow.getHash=function(){return l}}}}})(jQuery);